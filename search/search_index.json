{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Bem vindo \u00e0s minhas notas de aula","text":"<p>Este \u00e9 um reposit\u00f3rio pessoal de conhecimento, criado para reunir e compartilhar estudos, descobertas e reflex\u00f5es ao longo da minha trajet\u00f3ria. Os temas abordados circulam entre Data Science, Engenharia de Software, Arquitetura e Urbanismo, conectando tecnologia, planejamento, cidades e processos de constru\u00e7\u00e3o do espa\u00e7o. Este espa\u00e7o evolui continuamente, acompanhando meu aprendizado e minhas experi\u00eancias.</p>"},{"location":"ciencia_dados/signal_process/","title":"Processamento de Sinais","text":"<p>O primeiro passo cr\u00edtico em uma pipeline de processamento de sinais de sa\u00fade \u00e9 a ingest\u00e3o correta dos dados brutos. Neste projeto, foi utilizado o dataset Empatica4Stress[1] como modelo para construir nosso m\u00f3dulo de carregamento.</p> <p>Este artigo detalha o funcionamento dos m\u00f3dulos <code>data_loader</code>, <code>preprocessing</code>, <code>feature_extraction</code> e <code>labeling</code>.</p> <p>Fluxo do Pipeline: <code>data_loader</code> \\(\\rightarrow\\) <code>preprocessing</code> \\(\\rightarrow\\) <code>feature_extraction</code> \\(\\rightarrow\\) <code>labeling</code></p>"},{"location":"ciencia_dados/signal_process/#1-ingestao-de-dados-data_loader","title":"1. Ingest\u00e3o de Dados (<code>data_loader</code>)","text":"<p>Este m\u00f3dulo tem a fun\u00e7\u00e3o de ingerir os dados brutos pela leitura dos arquivos CSV gerados pelo dispositivo Empatica E4[1].</p>"},{"location":"ciencia_dados/signal_process/#o-desafio-dos-dados-multimodais","title":"O Desafio dos Dados Multimodais","text":"<p>O dispositivo coleta dados de diversos sensores simultaneamente. O maior desafio na ingest\u00e3o desses dados \u00e9 que cada sensor opera em uma Taxa de Amostragem (Sampling Rate) diferente:</p> Sensor Descri\u00e7\u00e3o Taxa de Amostragem (Hz) BVP Fotopletismografia 64 ACC Aceler\u00f4metro (Movimento 3 eixos) 32 EDA Atividade Eletrod\u00e9rmica (Suor/Estresse) 4 TEMP Temperatura da Pele 4 <p>Isso significa que, para um mesmo intervalo de tempo, teremos 64 pontos de dados para o BVP, mas apenas 4 pontos para a EDA. O <code>data_loader</code> tem a fun\u00e7\u00e3o de normalizar essa discrep\u00e2ncia temporal.</p>"},{"location":"ciencia_dados/signal_process/#leitura-de-arquivos-e-sincronizacao","title":"Leitura de Arquivos e Sincroniza\u00e7\u00e3o","text":"<p>Os arquivos CSV do Empatica possuem um cabe\u00e7alho espec\u00edfico (\"headless\") nas duas primeiras linhas: * Linha 0: Timestamp de in\u00edcio. * Linha 1: Taxa de amostragem (Hz). * Linha ...: Dados brutos.</p> <p>O nosso <code>data_loader</code> l\u00ea esses dados separadamente para configurar a frequ\u00eancia correta de cada sinal antes de carregar o restante dos dados.</p>"},{"location":"ciencia_dados/signal_process/#conversao-para-timedelta","title":"Convers\u00e3o para Timedelta","text":"<p>Em vez de trabalhar com datas absolutas, que podem complicar a fus\u00e3o de dados de diferentes sess\u00f5es ou sujeitos, optou-se por converter o \u00edndice para Timedelta, que \u00e9 o tempo decorrido desde o in\u00edcio da grava\u00e7\u00e3o.</p> <p>A l\u00f3gica aplicada \u00e9:</p> \\[t_i = \\frac{i}{f_s}\\] <p>Onde, \\(t_i\\) refere-se ao tempo em segundos do \u00edndice da amostra \\(i\\) e \\(f_s\\) \u00e9 a frequ\u00eancia de amostragem do sensor.</p> <p>!!! quote \"Por que Timedelta?\"     Usar Timedelta facilita o alinhamento de janelas. Por exemplo, podemos pegar os primeiros 60 segundos, independentemente da hora do dia em que o experimento foi realizado.</p>"},{"location":"ciencia_dados/signal_process/#tratamento-do-intervalo-interbatimento-ibi","title":"Tratamento do Intervalo Interbatimento (IBI)","text":"<p>O IBI (Intervalo Interbatimento) refere-se ao tempo preciso, geralmente em milissegundos, entre dois batimentos card\u00edacos consecutivos. \u00c9 uma medida fundamental para analisar a variabilidade da frequ\u00eancia card\u00edaca (VFC) e revela como o sistema nervoso aut\u00f4nomo (SNA) responde ao estresse ou repouso. Uma varia\u00e7\u00e3o normal \u00e9 algo bom, enquanto IBIs excessivamente consistentes ou irregulares podem indicar problemas.</p> <p>Ele n\u00e3o possui uma taxa de amostragem fixa, pois \u00e9 uma s\u00e9rie temporal de eventos. Um dado \u00e9 gerado apenas quando um pico R \u00e9 detectado. O <code>data_loader</code> trata o IBI preservando o timestamp exato de ocorr\u00eancia de cada batimento, o que \u00e9 crucial para an\u00e1lises posteriores de VFC no dom\u00ednio da frequ\u00eancia.</p> <pre><code>graph TD\n    classDef default font-size:16px;\n\n    A[Dados Brutos] --&gt; B(\"data_loader\")\n    B -- Leitura --&gt; C{\"Tipo de Sensor?\"}\n\n    C -- \"BVP / ACC / EDA\" --&gt; D[\"Calcula Timedelta&lt;br/&gt;(Baseado em 1/Fs)\"]\n    C -- IBI --&gt; E[\"Preserva Timestamp&lt;br/&gt;de Evento\"]\n\n    D --&gt; F[(\"Dict de DataFrames&lt;br/&gt;{sensor: df}\")]\n    E --&gt; F\n    F --&gt; G[\"Pr\u00e9-processamento\"]\n\n    style A fill:#f9f,stroke:#333,stroke-width:2px\n    style G fill:#f9f,stroke:#333,stroke-width:2px</code></pre>"},{"location":"ciencia_dados/signal_process/#pre-processamento","title":"Pr\u00e9-processamento","text":"<p>Ap\u00f3s a ingest\u00e3o, entramos no n\u00facleo do processamento. O objetivo desta etapa \u00e9 duplo: limpar o ru\u00eddo inerente \u00e0 coleta de dados em ambiente n\u00e3o controlado e segmentar os dados em unidades de tempo compar\u00e1veis.</p>"},{"location":"ciencia_dados/signal_process/#pipeline-de-limpeza-por-sensor","title":"Pipeline de Limpeza por Sensor","text":"<p>Cada sensor possui caracter\u00edsticas espectrais e tipos de ru\u00eddo distintos, exigindo estrat\u00e9gias de filtragem espec\u00edficas.</p>"},{"location":"ciencia_dados/signal_process/#atividade-eletrodermica-eda","title":"Atividade Eletrod\u00e9rmica (EDA)","text":"<p>A EDA reflete mudan\u00e7as na condutividade el\u00e9trica da pele, que podem vir de est\u00edmulos internos ou externos. Esses est\u00edmulos refletem em altera\u00e7\u00f5es na atividade das gl\u00e2ndulas sudor\u00edparas \u00e9crinas, que s\u00e3o inervadas pelo Sistema Nervoso Simp\u00e1tico (SNS) [3]. </p> <p>O principal desafio t\u00e9cnico aqui \u00e9 o alinhamento temporal com sensores mais r\u00e1pidos.</p> <ul> <li>Upsampling: Realiza-se a interpola\u00e7\u00e3o do sinal de 4Hz para 64Hz (mesma frequ\u00eancia do BVP) via interpola\u00e7\u00e3o linear, de maneira que as matrizes de dados tenham o mesmo tamanho durante a segmenta\u00e7\u00e3o.</li> <li>Suaviza\u00e7\u00e3o: Aplica\u00e7\u00e3o de um Filtro Gaussiano (<code>sigma=400ms</code>) para remover micro-flutua\u00e7\u00f5es e ru\u00eddo de quantiza\u00e7\u00e3o, preservando a morfologia macro das respostas de condut\u00e2ncia (SCR).</li> </ul>"},{"location":"ciencia_dados/signal_process/#fotopletismografia-bvp","title":"Fotopletismografia (BVP)","text":"<p>O sinal de volume sangu\u00edneo \u00e9 suscet\u00edvel a artefatos de movimento e varia\u00e7\u00f5es de linha de base. * Filtro Passa-Banda (Bandpass): Utilizamos um filtro Chebyshev Tipo II (Ordem 4, Atenua\u00e7\u00e3o 20dB), com faixa de 0.5 Hz a 5.0 Hz. Essa faixa corresponde a uma frequ\u00eancia card\u00edaca entre 30 bpm e 300 bpm, cobrindo todo o espectro fisiol\u00f3gico humano e eliminando ru\u00eddos de baixa frequ\u00eancia (respira\u00e7\u00e3o/movimento lento) e alta frequ\u00eancia (el\u00e9trico). * Fase Zero: Utilizamos a fun\u00e7\u00e3o <code>sosfiltfilt</code> (filtragem bidirecional) para garantir que n\u00e3o haja deslocamento de fase, o que alteraria a localiza\u00e7\u00e3o temporal dos picos sist\u00f3licos.</p>"},{"location":"ciencia_dados/signal_process/#acelerometria-acc","title":"Acelerometria (ACC)","text":"<p>Para medir a intensidade do movimento independentemente da posi\u00e7\u00e3o do bra\u00e7o do usu\u00e1rio, calculamos a Magnitude Vetorial:</p> \\[Mag_{ACC} = \\sqrt{x^2 + y^2 + z^2}\\] <p>Em seguida, aplicamos uma suaviza\u00e7\u00e3o Gaussiana (<code>sigma=5</code>) para atenuar a vibra\u00e7\u00e3o e focar no movimento volunt\u00e1rio.</p>"},{"location":"ciencia_dados/signal_process/#segmentacao-janelamento","title":"Segmenta\u00e7\u00e3o (Janelamento)","text":"<p>Os dados cont\u00ednuos s\u00e3o fatiados em janelas de 60 segundos.</p>"},{"location":"ciencia_dados/signal_process/#controle-de-qualidade","title":"Controle de Qualidade","text":"<p>Se uma janela contiver menos de 95% dos dados esperados, como por exemplo devido a uma queda de conex\u00e3o, ela \u00e9 descartada. Isso evita que o modelo aprenda com janelas incompletas ou corrompidas.</p> <pre><code>graph TD\n    subgraph Raw [\"Dados Brutos\"]\n        A[\"EDA (4Hz)\"]\n        B[\"BVP (64Hz)\"]\n        C[\"ACC (32Hz)\"]\n    end\n\n    subgraph Process [\"Tratamento\"]\n        A --&gt; A1[\"Upsampling (64Hz)&lt;br/&gt;+ Gaussiano\"]\n        B --&gt; B1[\"Bandpass Chebyshev II&lt;br/&gt;(0.5 - 5.0 Hz)\"]\n        C --&gt; C1[\"Magnitude Vetorial&lt;br/&gt;+ Gaussiano\"]\n    end\n\n    subgraph Output [\"Segmenta\u00e7\u00e3o\"]\n        A1 --&gt; D{\"Janelamento&lt;br/&gt;(60s)\"}\n        B1 --&gt; D\n        C1 --&gt; D\n        D -- \"Perda &lt; 5%\" --&gt; E[Janela V\u00e1lida]\n        D -- \"Perda &gt; 5%\" --&gt; F[Descarte]\n    end</code></pre>"},{"location":"ciencia_dados/signal_process/#extracao-de-caracteristicas","title":"Extra\u00e7\u00e3o de Caracter\u00edsticas","text":"<p>Com as janelas limpas, transformamos as s\u00e9ries temporais em vetores de caracter\u00edsticas (feature vectors) prontos para modelos de Machine Learning.</p>"},{"location":"ciencia_dados/signal_process/#features-de-bvp-variabilidade-da-frequencia-cardiaca","title":"Features de BVP (Variabilidade da Frequ\u00eancia Card\u00edaca)","text":"<p>A VFC \u00e9 o padr\u00e3o-ouro para detec\u00e7\u00e3o de estresse auton\u00f4mico.</p> <ul> <li> <p>Dom\u00ednio do Tempo: Focamos na estat\u00edstica dos intervalos entre picos. <code>Mean_PP</code>, <code>std_PP</code> (m\u00e9dia e desvio padr\u00e3o dos intervalos pico-a-pico) e <code>M_HR</code> (M\u00e9dia da frequ\u00eancia card\u00edaca instant\u00e2nea).</p> </li> <li> <p>Dom\u00ednio da Frequ\u00eancia: A <code>HF</code> (High Frequency) apresenta-se como a pot\u00eancia na banda 0.15\u20130.4 Hz, calculada via m\u00e9todo de Welch. Esta m\u00e9trica \u00e9 associada \u00e0 atividade parassimp\u00e1tica de relaxamento.</p> </li> <li> <p>N\u00e3o-Linear: O <code>SD2</code> (Poincar\u00e9 Plot) representa a variabilidade de longo prazo e correlaciona-se com a atividade simp\u00e1tica e parassimp\u00e1tica global.</p> </li> </ul>"},{"location":"ciencia_dados/signal_process/#features-de-eda-resposta-galvanica","title":"Features de EDA (Resposta Galv\u00e2nica)","text":"<p>A EDA \u00e9 decomposta em n\u00edvel t\u00f4nico (linha de base) e f\u00e1sico (respostas r\u00e1pidas a est\u00edmulos - SCR).</p> <ul> <li> <p>Detec\u00e7\u00e3o: Primeiro \u00e9 feita a detec\u00e7\u00e3o de picos (SCR), utilizando uma t\u00e9cnica de convolu\u00e7\u00e3o com janela Bartlett de 20 pontos na derivada do sinal. Isso atua como um detector de bordas (matched filter) para encontrar subidas abruptas de condut\u00e2ncia, t\u00edpicas de estresse agudo.</p> </li> <li> <p>M\u00e9tricas:</p> <ul> <li><code>N_PEAKS</code>: Quantidade de picos na janela (frequ\u00eancia de est\u00edmulos).</li> <li><code>M_Amp</code>: Amplitude m\u00e9dia dos picos (intensidade da rea\u00e7\u00e3o).</li> <li><code>M_RT</code> (Rise Time): Tempo m\u00e9dio de subida do pico.</li> </ul> </li> </ul>"},{"location":"ciencia_dados/signal_process/#rotulagem","title":"Rotulagem","text":"<p>A etapa final antes do treinamento \u00e9 atribuir um r\u00f3tulo (y) para cada janela de dados (X). O sistema vai suportar duas estrat\u00e9gias:</p> <p>A etapa final antes do treinamento \u00e9 atribuir um r\u00f3tulo (y) para cada janela de dados (X). O sistema suporta duas estrat\u00e9gias:</p> <ul> <li> <p>M\u00e9todo 1: Protocolo Temporal onde os r\u00f3tulos s\u00e3o atribu\u00eddos baseados em timestamps pr\u00e9-definidos.</p> <ul> <li>Das 14:00 \u00e0s 14:20 = Stress</li> <li>Restante = Baseline</li> </ul> </li> <li> <p>M\u00e9todo 2: Limiar Fisiol\u00f3gico, onde \u00e9 definida binariamente rotulos de Stress = 1 ou= 1 ou Repouso = 0 se a m\u00e9dia da EDA na janela for superior a um limiar T. O limiar pode ser fixo ou adaptativo, por exemplo:</p> </li> </ul> \\[T = \\mu_{\\text{sujeito}} + \\sigma_{\\text{sujeito}}\\] <p>Onde:</p> <ul> <li>\\(T\\): \u00c9 o nosso limiar de Corte (Threshold), que se a m\u00e9dia da EDA na janela atual for maior que \\(T\\), a janela \u00e9 rotulada como Estresse (<code>1</code>); caso contr\u00e1rio, \u00e9 Repouso (<code>0</code>).</li> <li>\\(\\mu_{\\text{sujeito}}\\): Representa a M\u00e9dia da Atividade Eletrod\u00e9rmica (EDA) daquele sujeito espec\u00edfico, calculada preferencialmente durante o per\u00edodo de baseline (repouso inicial).</li> <li>\\(\\sigma_{\\text{sujeito}}\\): Representa o Desvio Padr\u00e3o da EDA do sujeito. Adicionar o desvio padr\u00e3o serve para garantir que apenas aumentos significativos sejam considerados estresse.</li> </ul>   ## C\u00f3digo Fonte  O pipeline completo est\u00e1 implementado em Python e hospedado no GitHub. Abaixo est\u00e3o os links diretos para os m\u00f3dulos descritos neste artigo:  * [**01_data_loader.py**](https://github.com/SEU_USUARIO/SEU_REPOSITORIO/blob/main/src/01_data_loader.py) \u2013 Ingest\u00e3o e sincroniza\u00e7\u00e3o dos sensores (BVP, ACC, EDA, TEMP). * [**04_preprocessing.py**](https://github.com/SEU_USUARIO/SEU_REPOSITORIO/blob/main/src/04_preprocessing.py) \u2013 Filtragem de sinal, *upsampling* e segmenta\u00e7\u00e3o de janelas. * [**02_feature_extraction.py**](https://github.com/SEU_USUARIO/SEU_REPOSITORIO/blob/main/src/02_feature_extraction.py) \u2013 Extra\u00e7\u00e3o de m\u00e9tricas de VFC e SCR. * [**03_labeling.py**](https://github.com/SEU_USUARIO/SEU_REPOSITORIO/blob/main/src/03_labeling.py) \u2013 Defini\u00e7\u00e3o dos r\u00f3tulos de estresse (Target).  !!! info \"Estrutura de Pastas\"     Certifique-se de que o arquivo `config.py` tamb\u00e9m esteja presente no seu diret\u00f3rio `src/`, pois ele cont\u00e9m as constantes de frequ\u00eancia de amostragem utilizadas por todos os scripts acima."},{"location":"ciencia_dados/signal_process/#referencias-bibliograficas","title":"Refer\u00eancias Bibliogr\u00e1ficas","text":"<ol> <li> Empatica Inc. (2020). E4 wristband user's manual. Recuperado de https://www.empatica.com/en-eu/research/e4/</li> <li> Task Force of the European Society of Cardiology and the North American Society of Pacing and Electrophysiology. (1996). Heart rate variability: standards of measurement, physiological interpretation and clinical use. Circulation, 93(5), 1043-1065.</li> <li> Boucsein, W. (2012). Electrodermal activity (2nd ed.). Springer Science &amp; Business Media.</li> <li> Schmidt, P., Reiss, A., Duerichen, R., Marberger, C., &amp; Van Laerhoven, K. (2018). Introducing WESAD, a multimodal dataset for wearable stress and affect detection. In Proceedings of the 20th ACM International Conference on Multimodal Interaction (pp. 400-408).</li> </ol>"}]}